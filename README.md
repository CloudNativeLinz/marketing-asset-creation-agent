# Marketing Asset Creation Agent

A CLI tool built in Go that generates and edits marketing images using the [Azure OpenAI](https://learn.microsoft.com/en-us/azure/ai-services/openai/) image-edits endpoint (`gpt-image-1.5`). Feed it a prompt and one or two images, and it returns an AI-generated composite.

## Prerequisites

- **Go 1.24+**
- **Azure CLI** (`az`) – authenticated with access to an Azure OpenAI resource
- An **Azure OpenAI** deployment of `gpt-image-1.5`

## Project Structure

```
├── main.go               # Application entry point
├── prompts/
│   ├── event-prompt.md   # Prompt: composite a person onto a background image
│   └── speaking-prompt.md# Prompt: apply pop-art style to an image
├── assets/               # Input images and generated outputs
├── Makefile              # Helpers (e.g. `make clean`)
├── .env                  # Configuration file (created from .env.example)
└── go.mod
```

## Configuration

Create a `.env` file in the root directory with your Azure OpenAI details:

```ini
AZURE_OPENAI_RESOURCE=your-resource-name.openai.azure.com
AZURE_OPENAI_DEPLOYMENT=gpt-image-1.5
AZURE_OPENAI_API_VERSION=2025-04-01-preview
```

## Usage

### Using a prompt file (recommended)

```bash
go run . \
  -p prompts/event-prompt.md \
  -i assets/juergen.jpg \
  -b assets/meetup-background.jpg \
  -s 1024x1024
```

### Using an inline prompt

```bash
go run . \
  -p "make it a pop art style" \
  -i assets/juergen.jpg \
  -s 1024x1024
```

### Flags

| Flag | Required | Description |
|------|----------|-------------|
| `-p` | Yes | Text prompt **or** path to a prompt file |
| `-i` | Yes | Foreground / input image file |
| `-b` | No | Background image file (enables compositing) |
| `-s` | No | Output image size (default: `1024x1024`) |

The output file is derived automatically from the input filename:

```
assets/juergen.jpg → assets/juergen_generated.jpg
```

## Authentication

The tool obtains a bearer token by running:

```bash
az account get-access-token --resource https://cognitiveservices.azure.com
```

Make sure you are logged in (`az login`) and have the appropriate role assigned on the Azure OpenAI resource.

## Cleaning Up

Remove all generated images:

```bash
make clean
```

## License

See repository for license details.

The file assets/thispersondoesnotexist.jpg has been added for testing purposes. It is an image generated by the website [This Person Does Not Exist](https://thispersondoesnotexist.com/).
